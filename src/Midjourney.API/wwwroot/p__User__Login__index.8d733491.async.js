"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[366],{42110:function(ee,C){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};C.Z=e},94149:function(ee,C,e){e.d(C,{Z:function(){return M}});var B=e(1413),j=e(67294),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},I=D,U=e(91146),z=function(s,v){return j.createElement(U.Z,(0,B.Z)((0,B.Z)({},s),{},{ref:v,icon:I}))},b=j.forwardRef(z),M=b},44935:function(ee,C,e){e.r(C),e.d(C,{default:function(){return Ve}});var B=e(15009),j=e.n(B),D=e(97857),I=e.n(D),U=e(99289),z=e.n(U),b=e(5574),M=e.n(b),N=e(66927),s=e(1413),v=e(67294),re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},ie=re,se=e(91146),le=function(a,t){return v.createElement(se.Z,(0,s.Z)((0,s.Z)({},a),{},{ref:t,icon:ie}))},oe=v.forwardRef(le),de=oe,ue=e(94149),$=e(91),ce=e(10915),ve=e(21532),ge=e(93967),fe=e.n(ge),he=e(34994),w=e(4942),me=e(64847),pe=function(a){return(0,w.Z)((0,w.Z)({},a.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:a.colorTextSecondary,fontSize:a.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,w.Z)({},"".concat(a.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function xe(l){return(0,me.Xj)("LoginForm",function(a){var t=(0,s.Z)((0,s.Z)({},a),{},{componentCls:".".concat(l)});return[pe(t)]})}var n=e(85893),Se=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function ye(l){var a,t=l.logo,d=l.message,i=l.contentStyle,p=l.title,x=l.subTitle,y=l.actions,c=l.children,Z=l.containerStyle,h=l.otherStyle,r=(0,$.Z)(l,Se),Q=(0,ce.YB)(),X=r.submitter===!1?!1:(0,s.Z)((0,s.Z)({searchConfig:{submitText:Q.getMessage("loginForm.submitText","\u767B\u5F55")}},r.submitter),{},{submitButtonProps:(0,s.Z)({size:"large",style:{width:"100%"}},(a=r.submitter)===null||a===void 0?void 0:a.submitButtonProps),render:function(A,k){var o,g=k.pop();if(typeof(r==null||(o=r.submitter)===null||o===void 0?void 0:o.render)=="function"){var S,f;return r==null||(S=r.submitter)===null||S===void 0||(f=S.render)===null||f===void 0?void 0:f.call(S,A,k)}return g}}),V=(0,v.useContext)(ve.ZP.ConfigContext),W=V.getPrefixCls("pro-form-login"),R=xe(W),Y=R.wrapSSR,O=R.hashId,m=function(A){return"".concat(W,"-").concat(A," ").concat(O)},F=(0,v.useMemo)(function(){return t?typeof t=="string"?(0,n.jsx)("img",{src:t}):t:null},[t]);return Y((0,n.jsxs)("div",{className:fe()(m("container"),O),style:Z,children:[(0,n.jsxs)("div",{className:"".concat(m("top")," ").concat(O).trim(),children:[p||F?(0,n.jsxs)("div",{className:"".concat(m("header")),children:[F?(0,n.jsx)("span",{className:m("logo"),children:F}):null,p?(0,n.jsx)("span",{className:m("title"),children:p}):null]}):null,x?(0,n.jsx)("div",{className:m("desc"),children:x}):null]}),(0,n.jsxs)("div",{className:m("main"),style:(0,s.Z)({width:328},i),children:[(0,n.jsxs)(he.A,(0,s.Z)((0,s.Z)({isKeyPressSubmit:!0},r),{},{submitter:X,children:[d,c]})),y?(0,n.jsx)("div",{className:m("main-other"),style:h,children:y}):null]})]}))}var te=e(97685),Pe=e(21770),je=e(53025),Ze=e(55241),Ce=e(98423),G=e(22360),Me=["fieldProps","proFieldProps"],Te=["fieldProps","proFieldProps"],H="text",Ae=function(a){var t=a.fieldProps,d=a.proFieldProps,i=(0,$.Z)(a,Me);return(0,n.jsx)(G.Z,(0,s.Z)({valueType:H,fieldProps:t,filedConfig:{valueType:H},proFieldProps:d},i))},Le=function(a){var t=(0,Pe.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),d=(0,te.Z)(t,2),i=d[0],p=d[1];return(0,n.jsx)(je.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(y){var c,Z=y.getFieldValue(a.name||[]);return(0,n.jsx)(Ze.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return p(r)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(c=a.statusRender)===null||c===void 0?void 0:c.call(a,Z),a.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:i,children:a.children}))}})},Re=function(a){var t=a.fieldProps,d=a.proFieldProps,i=(0,$.Z)(a,Te),p=(0,v.useState)(!1),x=(0,te.Z)(p,2),y=x[0],c=x[1];return t!=null&&t.statusRender&&i.name?(0,n.jsx)(Le,{name:i.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:y,onOpenChange:c,children:(0,n.jsx)("div",{children:(0,n.jsx)(G.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,Ce.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(h){var r;t==null||(r=t.onBlur)===null||r===void 0||r.call(t,h),c(!1)},onClick:function(h){var r;t==null||(r=t.onClick)===null||r===void 0||r.call(t,h),c(!0)}}),proFieldProps:d,filedConfig:{valueType:H}},i))})}):(0,n.jsx)(G.Z,(0,s.Z)({valueType:"password",fieldProps:t,proFieldProps:d,filedConfig:{valueType:H}},i))},J=Ae;J.Password=Re,J.displayName="ProFormComponent";var Oe=J,ne=e(60909),L=e(94272),T=e(2453),Fe=e(55102),Be=e(42075),K=e(83622),Ie=e(73935),ze=e(67610),Ne=function(){var a=(0,ne.l)(function(t){var d=t.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:d.borderRadius,":hover":{backgroundColor:d.colorBgTextHover}}});return(0,n.jsx)("div",{className:a,"data-lang":!0,children:L.SelectLang&&(0,n.jsx)(L.SelectLang,{})})},He=function(){var a=(0,L.useModel)("@@initialState"),t=a.initialState,d=a.setInitialState,i=(0,L.useIntl)(),p=(0,v.useState)(!1),x=M()(p,2),y=x[0],c=x[1],Z=(0,v.useState)(),h=M()(Z,2),r=h[0],Q=h[1],X=(0,v.useState)(!1),V=M()(X,2),W=V[0],R=V[1],Y=(0,ne.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),O=function(){if(!r){T.ZP.error("Please input email");return}R(!0),(0,N.z2)(JSON.stringify({email:r})).then(function(g){R(!1),g.success?(T.ZP.success(i.formatMessage({id:"pages.login.registerSuccess"})),c(!1)):T.ZP.error(g.message)})},m=function(){var o=z()(j()().mark(function g(S){var f,P,q,_,ae;return j()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,N.x4)(JSON.stringify(S.password||""));case 3:if(f=u.sent,!f.success){u.next=12;break}return f&&f.data&&sessionStorage.setItem("mj-api-secret",(q=f.data)===null||q===void 0?void 0:q.apiSecret),T.ZP.success(i.formatMessage({id:"pages.login.success"})),u.next=9,t==null||(P=t.fetchUserInfo)===null||P===void 0?void 0:P.call(t);case 9:return _=u.sent,_&&((0,Ie.flushSync)(function(){d(function(We){return I()(I()({},We),{},{currentUser:_})})}),location.hash="#/task"),u.abrupt("return");case 12:T.ZP.error(f.message),u.next=19;break;case 15:u.prev=15,u.t0=u.catch(0),ae=i.formatMessage({id:"pages.login.failure"}),T.ZP.error(ae);case 19:case"end":return u.stop()}},g,null,[[0,15]])}));return function(S){return o.apply(this,arguments)}}(),F=(0,v.useState)(!1),E=M()(F,2),A=E[0],k=E[1];return(0,v.useEffect)(function(){(0,N.rw)().then(function(o){o.success&&o.data&&k(o.data.isRegister)})},[]),(0,n.jsxs)("div",{className:Y,children:[(0,n.jsx)(L.Helmet,{children:(0,n.jsxs)("title",{children:[i.formatMessage({id:"menu.login"})," - ",ze.Z.title]})}),(0,n.jsx)(Ne,{}),(0,n.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:y&&A?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"360px",margin:"0 auto"},children:[(0,n.jsx)(Fe.Z,{name:"email",size:"large",prefix:(0,n.jsx)(de,{}),placeholder:i.formatMessage({id:"pages.register.email.placeholder",defaultMessage:"Email"}),value:r,onChange:function(g){Q(g.target.value)}}),(0,n.jsxs)(Be.Z,{style:{marginTop:"16px"},children:[(0,n.jsx)(K.ZP,{loading:W,style:{width:200},type:"primary",size:"large",onClick:O,children:i.formatMessage({id:"pages.login.register"})}),(0,n.jsx)(K.ZP,{type:"link",onClick:function(){c(!1)},children:i.formatMessage({id:"pages.login.returnLogin"})})]})]}):(0,n.jsx)(ye,{contentStyle:{minWidth:280,maxWidth:"75vw",height:"auto"},title:"Midjourney Proxy Admin",subTitle:i.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var o=z()(j()().mark(function g(S){return j()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,m(S);case 2:case"end":return P.stop()}},g)}));return function(g){return o.apply(this,arguments)}}(),actions:A&&(0,n.jsx)(K.ZP,{type:"link",onClick:function(){c(!0)},style:{paddingLeft:0},children:i.formatMessage({id:"pages.login.registerAccount"})}),children:(0,n.jsx)(Oe.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(ue.Z,{})},placeholder:i.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"Admin Token"})})})})]})},Ve=He}}]);
